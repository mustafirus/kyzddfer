–ó–≤—ñ—Å–Ω–æ, –æ—Å—å –∑–≤–µ–¥–µ–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç, —â–æ –ø–æ—î–¥–Ω—É—î –æ–±–∏–¥–≤—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤ —î–¥–∏–Ω—É –∫–æ–Ω—Ü–µ–ø—Ü—ñ—é –¥–ª—è –≤–∞—à–æ–≥–æ `ky-format`.

-----

### **–ö–æ–Ω—Ü–µ–ø—Ü—ñ—è: –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ –ª–µ—è—É—Ç–∏ —Ç–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—ñ–≤**

–ú–µ—Ç–∞ –¥–∞–Ω–æ—ó –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó ‚Äî –∑–Ω–∞—á–Ω–æ –∑–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥—É–±–ª—é–≤–∞–Ω–Ω—è –≤ –º–µ—Ç–∞–¥–∞–Ω–∏—Ö —à–ª—è—Ö–æ–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è "—É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏—Ö" –ª–µ—è—É—Ç—ñ–≤, —è–∫—ñ –º–æ–∂—É—Ç—å –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–æ –±—É–¥—å-—è–∫–æ—ó —Ç–∞–±–ª–∏—Ü—ñ, —Ç–∞ —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ –Ω–∞–¥—ñ–π–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º, –∑–∞ —è–∫–∏–º —Ç–∞–∫—ñ –ª–µ—è—É—Ç–∏ –≤–∏–∑–Ω–∞—á–∞—Ç–∏–º—É—Ç—å, —è–∫—ñ —Å–∞–º–µ –ø–æ–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏.

### **–ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –õ–µ—è—É—Ç—É**

[cite\_start]–ù–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ `ky-format` v2.0, –¥–µ –ª–µ—è—É—Ç–∏ —î –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º–∏ —Å—É—Ç–Ω–æ—Å—Ç—è–º–∏, —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Ü—ñ—î—ó –∑–∞–¥–∞—á—ñ[cite: 81, 83]. –ú–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –ª–µ—è—É—Ç, –≤–∫–∞–∑–∞–≤—à–∏ –¥–ª—è –Ω—å–æ–≥–æ `usage`, –∞–ª–µ –æ–ø—É—Å—Ç–∏–≤—à–∏ –∞—Ç—Ä–∏–±—É—Ç `table`.

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**

1.  [cite\_start]**–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–µ —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è:** –ö–æ–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —à—É–∫–∞—î –ª–µ—è—É—Ç, –≤–æ–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä—É—î –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É ( `table`, `usage`, `principal` —Ç–æ—â–æ)[cite: 88].
2.  [cite\_start]**–ü—Ä–∞–≤–∏–ª–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ:** –õ–µ—è—É—Ç –≤–≤–∞–∂–∞—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º, —è–∫—â–æ –∞—Ç—Ä–∏–±—É—Ç –æ–±–º–µ–∂–µ–Ω–Ω—è (–Ω–∞–ø—Ä., `table`) —É –Ω—å–æ–º—É **–Ω–µ –≤–∫–∞–∑–∞–Ω–∏–π**, –∞–±–æ —è–∫—â–æ –π–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–±—ñ–≥–∞—î—Ç—å—Å—è –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º[cite: 89]. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –ª–µ—è—É—Ç—É –±–µ–∑ `table()` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ–π —Ç–∞–±–ª–∏—Ü—ñ.
3.  [cite\_start]**–ü—Ä—ñ–æ—Ä–∏—Ç–µ–∑–∞—Ü—ñ—è:** –ó—ñ —Å–ø–∏—Å–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ª–µ—è—É—Ç—ñ–≤ –æ–±–∏—Ä–∞—î—Ç—å—Å—è —Ç–æ–π, —â–æ –º–∞—î –Ω–∞–π–≤–∏—â–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∞—Ç—Ä–∏–±—É—Ç–∞ `pri`[cite: 90]. –¶–µ –¥–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –ª–µ—è—É—Ç–∏, —è–∫—ñ –±—É–¥—É—Ç—å "–ø–µ—Ä–µ–±–∏–≤–∞—Ç–∏" —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ.

#### **–ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:**

```ky
layouts
  # 1. –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π (–¥–µ—Ñ–æ–ª—Ç–Ω–∏–π) –ª–µ—è—É—Ç –¥–ª—è –ª—É–∫–∞–ø—ñ–≤.
  # –ú–∞—î –Ω–∏–∑—å–∫–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —ñ –Ω–µ –º–∞—î –ø—Ä–∏–≤'—è–∑–∫–∏ –¥–æ —Ç–∞–±–ª–∏—Ü—ñ.
  generic_lookup pri(0), usage(lookup)
  list
    # ... –º–µ—Ö–∞–Ω—ñ–∑–º –≤–∏–±–æ—Ä—É –ø–æ–ª—ñ–≤ –±—É–¥–µ –æ–ø–∏—Å–∞–Ω–æ –≤ –ö—Ä–æ—Ü—ñ 2 ...

  # 2. –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –ª–µ—è—É—Ç –¥–ª—è –ª—É–∫–∞–ø–∞ —Ç–∞–±–ª–∏—Ü—ñ 'users'.
  # –ú–∞—î –≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —ñ –±—É–¥–µ –æ–±—Ä–∞–Ω–∏–π –∑–∞–º—ñ—Å—Ç—å generic_lookup,
  # –∫–æ–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø–∏—Ç—É –±—É–¥–µ { table: users, usage: lookup, ... }.
  users_lookup_custom pri(10), usage(lookup), table(users)
  list
    full_name
    email
```

### **–ö—Ä–æ–∫ 2: –î–∏–Ω–∞–º—ñ—á–Ω–µ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ü–æ–ª—è –¥–ª—è –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è**

–û—Å–Ω–æ–≤–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è: —è–∫ `generic_lookup` –º–∞—î –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —è–∫–µ –ø–æ–ª–µ (`name`, `title` —á–∏ `full_name`) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –∑–∞–ø–∏—Å—É –∑ –¥–æ–≤—ñ–ª—å–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ?

–î–ª—è —Ü—å–æ–≥–æ –ø—Ä–æ–ø–æ–Ω—É—î—Ç—å—Å—è **–∫–∞—Å–∫–∞–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è** ‚Äî –±–∞–≥–∞—Ç–æ—Ä—ñ–≤–Ω–µ–≤–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—è –ø—Ä–∞–≤–∏–ª, –∑–∞ —è–∫–æ—é —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —à—É–∫–∞—Ç–∏–º–µ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω–µ –ø–æ–ª–µ.

#### **–Ü—î—Ä–∞—Ä—Ö—ñ—è –ø—Ä–∞–≤–∏–ª (–≤—ñ–¥ –Ω–∞–π–≤–∏—â–æ–≥–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç—É –¥–æ –Ω–∞–π–Ω–∏–∂—á–æ–≥–æ):**

1.  **ü•á –Ø–≤–Ω–∞ –≤–∫–∞–∑—ñ–≤–∫–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ: –∞—Ç—Ä–∏–±—É—Ç `repr()`**
    –¶–µ –Ω–∞–π–Ω–∞–¥—ñ–π–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–±. –ú–∏ –≤–≤–æ–¥–∏–º–æ –Ω–æ–≤–∏–π –∞—Ç—Ä–∏–±—É—Ç `repr` (representation) –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ, —è–∫–∏–π –ø—Ä—è–º–æ –≤–∫–∞–∑—É—î –Ω–∞ –ø–æ–ª–µ-–ø—Ä–µ–¥—Å—Ç–∞–≤–Ω–∏–∫.

    ```ky
    tables
      users repr(full_name)
        full_name varchar(150)
        email varchar(100) !unique
    ```

2.  **ü•à –Ø–≤–Ω–∞ –≤–∫–∞–∑—ñ–≤–∫–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–æ–ª—è: –ø—Ä–∞–ø–æ—Ä `!repr`**
    –Ø–∫—â–æ `repr` –¥–ª—è —Ç–∞–±–ª–∏—Ü—ñ –Ω–µ –≤–∫–∞–∑–∞–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ —à—É–∫–∞—î –ø–æ–ª–µ, —è–∫–µ –ø–æ–∑–Ω–∞—á–µ–Ω–µ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–º –ø—Ä–∞–ø–æ—Ä–æ–º `!repr`.

    ```ky
    tables
      products
        title varchar(200) !repr
        sku varchar(50) !unique
    ```

3.  **ü•â –ù–µ—è–≤–Ω–∏–π –ø–æ—à—É–∫ –∑–∞ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—î—é**
    –Ø–∫—â–æ –∂–æ–¥–Ω–µ –ø–æ–ª–µ –Ω–µ –ø–æ–∑–Ω–∞—á–µ–Ω–µ —è–≤–Ω–æ, —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –∑–Ω–∞–π—Ç–∏ –π–æ–≥–æ –∑–∞ —Å–ø–∏—Å–∫–æ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö —ñ–º–µ–Ω: `name`, `title`, `header`, `subject`.

    ```ky
    tables
      tags
        name varchar(50) # –ë—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—î—é.
    ```

4.  **‚ÅâÔ∏è –ö—Ä–∞–π–Ω—ñ–π –≤–∏–ø–∞–¥–æ–∫**
    –Ø–∫—â–æ –∂–æ–¥–Ω–µ –∑ –ø—Ä–∞–≤–∏–ª –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ, –ø–∞—Ä—Å–µ—Ä –≤–∏–¥–∞—î –ø–æ–º–∏–ª–∫—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, —â–æ–± –∑–º—É—Å–∏—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ —è–≤–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω–µ –ø–æ–ª–µ. –¶–µ –∑–∞–ø–æ–±—ñ–≥–∞—î –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ–π –ø–æ–≤–µ–¥—ñ–Ω—Ü—ñ.

### **–ó–≤–µ–¥–µ–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥**

–û—Å—å —è–∫ –≤–∏–≥–ª—è–¥–∞—î —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ñ–∞–π–ª `.ky`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –æ–±–∏–¥–≤–∞ –º–µ—Ö–∞–Ω—ñ–∑–º–∏:

```ky
rack ver(2.0)
  tables
    # –í–∞—Ä—ñ–∞–Ω—Ç 1: –Ø–≤–Ω–∞ –≤–∫–∞–∑—ñ–≤–∫–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ
    users repr(full_name)
      full_name varchar(150)
      email varchar(100) !unique

    # –í–∞—Ä—ñ–∞–Ω—Ç 2: –Ø–≤–Ω–∞ –≤–∫–∞–∑—ñ–≤–∫–∞ –Ω–∞ —Ä—ñ–≤–Ω—ñ –ø–æ–ª—è
    projects
      title varchar(255) !repr
      manager ref(users)

    # –í–∞—Ä—ñ–∞–Ω—Ç 3: –ü–æ—à—É–∫ –∑–∞ –∫–æ–Ω–≤–µ–Ω—Ü—ñ—î—é
    tags
      name varchar(50)
      
  layouts
    # –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π –ª–µ—è—É—Ç. –§—Ä–µ–π–º–≤–æ—Ä–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î –∫–∞—Å–∫–∞–¥–Ω—É —Å–∏—Å—Ç–µ–º—É,
    # —â–æ–± –∑–Ω–∞–π—Ç–∏ –ø–æ–ª–µ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è (full_name –¥–ª—è users, title –¥–ª—è projects, name –¥–ª—è tags).
    generic_form_view pri(0), usage(detail)
    form
      # –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –≤—É–∑–æ–ª <repr_field>, —è–∫–∏–π –≤–∫–∞–∑—É—î —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É
      # –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ —Å—é–¥–∏ –ø–æ–ª–µ, –∑–Ω–∞–π–¥–µ–Ω–µ –∑–∞ –∫–∞—Å–∫–∞–¥–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é.
      repr_field
    
    # –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π –ª–µ—è—É—Ç –¥–ª—è projects, —è–∫–∏–π –º–∞—î –≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç.
    project_detailed_view pri(10), usage(detail), table(projects)
    form
      title
      manager
```

### **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É**

  * [cite\_start]**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å (Decoupling):** `apps`, `layouts` —Ç–∞ `tables` –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–µ–∑–∞–ª–µ–∂–Ω–∏–º–∏[cite: 96, 97].
  * [cite\_start]**–¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è:** –£—Å—ñ –ª–µ—è—É—Ç–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ, —â–æ —Å–ø—Ä–æ—â—É—î —ó—Ö –ø—ñ–¥—Ç—Ä–∏–º–∫—É[cite: 98].
  * **–ü—Ä–∏–Ω—Ü–∏–ø DRY (Don't Repeat Yourself):** –£—Å—É–≤–∞—î—Ç—å—Å—è –ø–æ—Ç—Ä–µ–±–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–¥–Ω–æ—Ç–∏–ø–Ω—ñ –ª–µ—è—É—Ç–∏ –¥–ª—è –∫–æ–∂–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.
  * **–ù–∞–¥—ñ–π–Ω—ñ—Å—Ç—å —Ç–∞ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ –º–∞—î –ø—Ä–æ–∑–æ—Ä—ñ –ø—Ä–∞–≤–∏–ª–∞ –∑ —è–≤–Ω–∏–º–∏ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–∞–º–∏, —â–æ —Ä–æ–±–∏—Ç—å —ó—ó –ø–æ–≤–µ–¥—ñ–Ω–∫—É –∑—Ä–æ–∑—É–º—ñ–ª–æ—é —Ç–∞ –∫–µ—Ä–æ–≤–∞–Ω–æ—é.
  * [cite\_start]**–ü–æ—Ç—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª:** –ó–∞–º—ñ—Å—Ç—å –∂–æ—Ä—Å—Ç–∫–æ–≥–æ —É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è –≤–∏ –æ—Ç—Ä–∏–º—É—î—Ç–µ –≥–Ω—É—á–∫—É —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞–≤–∏–ª —Ç–∞ –æ–±–º–µ–∂–µ–Ω—å[cite: 99].